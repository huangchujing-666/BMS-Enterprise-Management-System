@model IEnumerable<pbxdata.model.tableFiledPerssion>

@{
    ViewBag.Title = "getFiled";
}

<div style="color:#FF5F3E;font-weight:bolder;line-height:20px;">功能列表</div>


<link href="~/Css/divShow.css" rel="stylesheet" />
<link href="~/Css/All.css" rel="stylesheet" />
<script src="~/js/jquery-1.8.2.min.js"></script>
<script src="~/js/divShow.js"></script>
<script>
    //
    $().ready(function () {
        var count = 0;
        //全选
        $("#ckbTableAll").click(function () {
            var c = $("input[name=ckbTable]");
            c.each(function (i, n) {
                if (count % 2 == 0) {
                    $(this).attr("checked", "checked");
                } else {
                    $(this).removeAttr("checked");
                }
            })
            count++;
        })

        //显示
        $("#ashow").click(function () {
            var s = "";
            var c = $("input[name=ckbTable]");
            c.each(function (i, n) {
                if ($(this).attr("checked")) {
                    s += $(this).attr("title") + ",";
                }
            })
            //s = s.substring(s.length - 1, 1);
            
            //把勾选的字段改为1（tableNameState(默认显示为1，不显示为0)）
            $.post('/TableFiled/filedShow', {filedId:s}, function (data) { alert(data) })
        })


        //隐藏
        $("#ahide").click(function () {
            var s = "";
            var c = $("input[name=ckbTable]");
            c.each(function (i, n) {
                if ($(this).attr("checked")) {
                    s += $(this).attr("title") + ",";
                }
            })
            //s = s.substring(s.length - 1, 1);

            //把勾选的字段改为0（tableNameState(默认显示为1，不显示为0)）
            $.post('/TableFiled/filedHide', { filedId: s }, function (data) { alert(data) })
        })

    })

</script>


<table class="mytable" rules="all">
    <tr>
        <th colspan="8" class="mytableadd">
            @*@Html.ActionLink("添加", "adddata")*@
            <div style="padding-top: 20px;">
                @*<a href="#"  onclick="javascript: showDiv()" >添加</a>*@
                <a href="#" id="ashow"  onclick="javascript: showDiv()" >显示</a>
                <a href="#" id="ahide"  onclick="javascript: showDiv()" >隐藏</a>
                @Html.ActionLink("返回", "getTable") 
            </div>
        </th>
    </tr>
    <tr>
        <th><input type="checkbox" id="ckbTableAll"  style="width:10px;"/></th>
        <th>
            表格字段
        </th>
        <th>
            字段等级
        </th>
        <th>
            表格状态
        </th>
        <th>
            字段状态
        </th>
        <th>
            排序
        </th>
        <th>
            操作人
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td><input type="checkbox" name="ckbTable" title="@Html.DisplayFor(modelItem => item.Id)"  style="width:10px;"/></td>
        <td>
            @Html.DisplayFor(modelItem => item.tableName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tableLevel)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tableNameState)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tableFiledState)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tableIndex)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UserId)
        </td>

    </tr>
}

</table>
