<script src="~/js/jquery-1.8.2.min.js"></script>
<link href="~/Css/divShow.css" rel="stylesheet" />
<script src="~/js/pageIndex.js"></script>
<link href="~/Css/Search.css" rel="stylesheet" />
<link href="~/Css/All.css" rel="stylesheet" />


<header style="width:100%; padding-top:10px;">@*<select id="selVencode" onchange="VecondeChange()"></select>*@
    <span class="spanProperty"><span class="spanPropertyName">品牌：</span><select class="spanPropertyValue" id="selBrand"></select></span>
    <span class="spanProperty"><span class="spanPropertyName">类别：</span><select class="spanPropertyValue" id="selType"></select></span>
    <span class="spanProperty"><span class="spanPropertyName">来货日期：</span><input type="date" id="Mindate"  class="spanPropertyValue" style="width:110px; padding:0 0;" />-<input type="date" id="Maxdate"  class="spanPropertyValue" style="width:110px; padding:0 0;" /></span>
    <input type="button" value="查  询" onclick="OnSearch()" class="spanPropertySearch" />
</header>


<div id="divContainer">
    <table id="mytable" class="mytable" border="0" cellpadding="0" cellspacing="0">
    </table>
    <div class="divJump" style="">
    <span id="spanPage" style="font-weight: 400;"></span>
        共 <span id='PageCount' style='color: blue'></span>页&nbsp;&nbsp;
    当前第 <span id='PageNum' style='color: blue'>1</span> 页&nbsp;&nbsp;
    共 <span id='AllCounts' style='color: blue'></span>条数据&nbsp;&nbsp;库存共<span id="BalanceCounts" style='color: blue'></span>件
      @*  <select id="selPages" onchange="selPage()">
            <option>1</option>
            <option>5</option>
            <option selected="selected">10</option>
            <option>20</option>
            <option>50</option>
            <option>100</option>
        </select>
        <a href="#" onclick="TurnPage(1)">首页</a>
        <a href="#" onclick="TurnPage(2)">上一页</a>
        <input type="text" id="txtTiao" name="txtTiao" value="1" onkeyup="OnTiaoChange();" />
        <a href="#" onclick="TurnPage(3)">下一页</a>
        <a href="#" onclick="TurnPage(4)">尾页</a>
        @Html.TextBox("txtTiao","", new { style = "width:20px;", onkeyup = "OnTiaoChange();" })
        <a href="#" onclick="TurnPage(5)">跳转</a>
        共<span id="PageCount"></span>页&nbsp;&nbsp;当前第<span id="PageNum"></span>页&nbsp;&nbsp;共<span id="AllCounts"></span>条数据&nbsp;&nbsp;库存共<span id="BalanceCounts"></span>件*@
    </div>
</div>

<script type="text/javascript">
    /*搜索*/
    function OnSearch() {
        var Brand = $("#selBrand").find("option:selected").val();
        var Type = $("#selType").find("option:selected").val();
        var Mindate = $("#Mindate").val().trim();
        var Maxdate = $("#Maxdate").val().trim();
        var params = "{Brand:'" + Brand + "',Type:'" + Type + "',Mindate:'" + Mindate + "',Maxdate:'" + Maxdate + "'}";
        $.post("/DataChart/GetLaiHuoReport", {
            menuId: "0",
            pageIndex: 1,
            pageSize: 10,
            params: params
        }, function (data) {
            $("#mytable").html("");
            var ss = data.split("-----");
            $("#mytable").append(ss[0]);
            $("#PageCount").html(ss[1]);
            $("#AllCounts").html(ss[2]);
            $("#BalanceCounts").html(ss[3]);
        });
        var b = $.PageFunc("/DataChart/GetLaiHuoReport", "0", params);
        $("#spanPage").html(b);
        $("#txtTiao").val(1);
        $("#PageNum").html(1);
    }

    function selPage(url, menuId, obj) {
        var params = JSON.stringify(obj).replace(/\"/g, "'");
        $.post(url, {
            menuId: menuId,
            pageIndex: 1,
            pageSize: $("#selPages").val(),
            params: params
        }, function (data) {
            $("#mytable").html("");
            var ss = data.split("-----");
            $("#mytable").append(ss[0]);
            $("#PageCount").html(ss[1]);
            $("#AllCounts").html(ss[2]);
            $("#BalanceCounts").html(ss[3]);
        });
    };
    //function VecondeChange() {
    //    OnSearch();
    //}


    //$.post("/Category/VencodeList", {}, function (data) { $("#selVencode").html(data) })


    /*品牌下拉框*/
    $.post("/DataChart/GetBrand", { BrandName: "" }, function (data) { $("#selBrand").html(data) });

    /*类别下拉框*/
    $.post("/DataChart/GetType", { TypeNo: "" }, function (data) { $("#selType").html(data) })
</script>
